webpackJsonp([27],{441:function(e,t,i){function a(e){i(507)}var o=i(1)(i(500),i(513),a,"data-v-70c48510",null);e.exports=o.exports},500:function(e,t,i){"use strict";function a(e){e.__doneUploading=!1,e.__failed=!1,e.__uploaded=0,e.__progress=0}Object.defineProperty(t,"__esModule",{value:!0});var o=i(209),n=i.n(o),s=i(42),r=i.n(s),l=i(2),u=l.Y.humanStorageSize;t.default={name:"uploader",components:{QInputFrame:l.Z,QSpinner:l._0,QIcon:l.e,QProgress:l._1,QItem:l.j,QItemSide:l.l,QItemMain:l.k,QItemTile:l.u,QCard:l.m,QCardMedia:l.o},props:{name:{type:String,default:"file"},headers:Object,url:{type:String,required:!0},urlFactory:{type:Function,required:!1},additionalFields:{type:Array,default:function(){return[]}},method:{type:String,default:"POST"},extensions:String,multiple:Boolean,hideUploadButton:Boolean,hideUploadProgress:Boolean,noThumbnails:Boolean,color:{type:String,default:"primary"}},data:function(){return{queue:[],files:[],uploading:!1,uploadedSize:0,totalSize:0,xhrs:[],focused:!1}},computed:{length:function(){return this.queue.length},label:function(){var e=u(this.totalSize);return this.uploading?this.progress.toFixed(2)+"% ("+u(this.uploadedSize)+" / "+e+")":this.length+" ("+e+")"},progress:function(){return this.totalSize?Math.min(99.99,this.uploadedSize/this.totalSize*100):0},addDisabled:function(){return!this.multiple&&this.length>=1}},methods:{__add:function(e){var t=this;if(!this.addDisabled){var i=Array.prototype.slice.call(e.target.files);this.$refs.file.value="",i=i.filter(function(e){return!t.queue.some(function(t){return e.name===t.name})}).map(function(e){if(a(e),e.__size=u(e.size),t.noThumbnails||!e.type.startsWith("image"))t.queue.push(e);else{var i=new FileReader;i.onload=function(i){var a=new Image;a.src=i.target.result,e.__img=a,t.queue.push(e),t.__computeTotalSize()},i.readAsDataURL(e)}return e}),this.files=this.files.concat(i),this.$emit("add",i),this.$emit("total",this.files),this.__computeTotalSize()}},__computeTotalSize:function(){this.totalSize=this.length?this.queue.map(function(e){return e.size}).reduce(function(e,t){return e+t}):0},__remove:function(e){var t=e.name,i=e.__doneUploading;this.uploading&&!i?(this.$emit("remove:abort",e,e.xhr),e.xhr.abort(),this.uploadedSize-=e.__uploaded):this.$emit("remove:"+(i?"done":"cancel"),e,e.xhr),i||(this.queue=this.queue.filter(function(e){return e.name!==t})),e.__removed=!0,this.files=this.files.filter(function(e){return e.name!==t}),this.__computeTotalSize(),this.$emit("total",this.files)},__removeUploaded:function(){this.files=this.files.filter(function(e){return!e.__doneUploading}),this.__computeTotalSize()},__pick:function(){!this.addDisabled&&this.$q.platform.is.mozilla&&this.$refs.file.click()},__getUploadPromise:function(e){var t=this,i=new FormData,o=new XMLHttpRequest;try{i.append("Content-Type",e.type||"application/octet-stream"),i.append(this.name,e),this.additionalFields.forEach(function(e){i.append(e.name,e.value)})}catch(e){return}return a(e),e.xhr=o,new r.a(function(a,s){o.upload.addEventListener("progress",function(i){if(!e.__removed){i.percent=i.total?i.loaded/i.total:0;var a=i.percent*e.size;t.uploadedSize+=a-e.__uploaded,e.__uploaded=a,e.__progress=Math.min(99,parseInt(100*i.percent,10))}},!1),o.onreadystatechange=function(){o.readyState<4||(o.status&&o.status<400?(e.__doneUploading=!0,e.__progress=100,t.$emit("uploaded",e,o),a(e)):(e.__failed=!0,t.$emit("fail",e,o),s(o)))},o.onerror=function(){e.__failed=!0,t.$emit("fail",e,o),s(o)},(t.urlFactory?t.urlFactory(e):r.a.resolve(t.url)).then(function(e){o.open(t.method,e,!0),t.headers&&n()(t.headers).forEach(function(e){o.setRequestHeader(e,t.headers[e])}),t.xhrs.push(o),o.send(i)})})},upload:function(){var e=this,t=this.length;if(0!==t){var i=0;this.uploadedSize=0,this.uploading=!0,this.xhrs=[],this.$emit("start");var a=function(){++i===t&&(e.uploading=!1,e.xhrs=[],e.queue=e.queue.filter(function(e){return!e.__doneUploading}),e.__computeTotalSize(),e.$emit("finish"))};this.queue.map(function(t){return e.__getUploadPromise(t)}).forEach(function(e){e.then(a).catch(a)})}},abort:function(){this.xhrs.forEach(function(e){e.abort()})},reset:function(){this.abort(),this.files=[],this.queue=[],this.__computeTotalSize(),this.$emit("reset")},totalFiles:function(){return this.files.length}}}},504:function(e,t,i){t=e.exports=i(435)(void 0),t.push([e.i,".upload-done[data-v-70c48510]{z-index:2}.uploaded-icon[data-v-70c48510]{z-index:3;text-shadow:0 0 20px #fff}.order[data-v-70c48510],.uploaded-icon[data-v-70c48510]{position:absolute;margin:auto;top:0;right:0;left:0;bottom:0}.order[data-v-70c48510]{z-index:2}",""])},507:function(e,t,i){var a=i(504);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(436)("9891565c",a,!0)},513:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-uploader"},[i("div",{staticClass:"text-center"},[e.uploading?e._e():i("q-icon",{staticClass:"q-uploader-pick-button q-if-control relative-position overflow-hidden ",attrs:{slot:"after",name:"add_a_photo",size:"60px",disabled:e.addDisabled},on:{click:e.__pick},slot:"after"},[i("input",{ref:"file",staticClass:"q-uploader-input absolute-full cursor-pointer",attrs:{type:"file",accept:e.extensions,multiple:e.multiple},on:{change:e.__add}})])],1),e._v(" "),i("q-input-frame",[e.hideUploadButton||e.uploading?e._e():i("q-icon",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"q-if-control",attrs:{slot:"after",name:"cloud_upload",disabled:0===e.length},on:{click:e.upload},slot:"after"})],1),e._v(" "),i("div",{staticClass:"q-uploader-files scroll  "},[i("div",{staticClass:"row"},e._l(e.files,function(t){return i("q-card",{key:t.name,staticClass:"col justify-start no-border",attrs:{flat:""}},[i("q-icon",{staticClass:"cursor-pointer bg-grey-6 relative-position",staticStyle:{"border-radius":"160px",top:"19px","z-index":"3"},attrs:{color:"light",name:"close",size:"2em"},on:{click:function(i){e.__remove(t)}}}),e._v(" "),i("q-card-media",{staticClass:"bg-light",staticStyle:{"border-radius":"13px"}},[i("div",{staticClass:"upload-done"},[t.__doneUploading?i("q-icon",{staticClass:"uploaded-icon",attrs:{name:"cloud_done",size:"500%",color:"green"}}):e._e(),e._v(" "),t.__failed?i("q-icon",{staticClass:"uploaded-icon",attrs:{name:"error",size:"500%",color:"negative"}}):e._e()],1),e._v(" "),t.__img?i("img",{staticClass:"responsive",attrs:{src:t.__img.src}}):e._e()])],1)}))])],1)},staticRenderFns:[]}}});