webpackJsonp([3,27],{441:function(t,e,i){function o(t){i(507)}var a=i(1)(i(500),i(513),o,"data-v-70c48510",null);t.exports=a.exports},445:function(t,e,i){function o(t){i(528)}var a=i(1)(i(518),i(533),o,null,null);t.exports=a.exports},500:function(t,e,i){"use strict";function o(t){t.__doneUploading=!1,t.__failed=!1,t.__uploaded=0,t.__progress=0}Object.defineProperty(e,"__esModule",{value:!0});var a=i(209),n=i.n(a),r=i(42),s=i.n(r),l=i(2),d=l.Y.humanStorageSize;e.default={name:"uploader",components:{QInputFrame:l.Z,QSpinner:l._0,QIcon:l.e,QProgress:l._1,QItem:l.j,QItemSide:l.l,QItemMain:l.k,QItemTile:l.u,QCard:l.m,QCardMedia:l.o},props:{name:{type:String,default:"file"},headers:Object,url:{type:String,required:!0},urlFactory:{type:Function,required:!1},additionalFields:{type:Array,default:function(){return[]}},method:{type:String,default:"POST"},extensions:String,multiple:Boolean,hideUploadButton:Boolean,hideUploadProgress:Boolean,noThumbnails:Boolean,color:{type:String,default:"primary"}},data:function(){return{queue:[],files:[],uploading:!1,uploadedSize:0,totalSize:0,xhrs:[],focused:!1}},computed:{length:function(){return this.queue.length},label:function(){var t=d(this.totalSize);return this.uploading?this.progress.toFixed(2)+"% ("+d(this.uploadedSize)+" / "+t+")":this.length+" ("+t+")"},progress:function(){return this.totalSize?Math.min(99.99,this.uploadedSize/this.totalSize*100):0},addDisabled:function(){return!this.multiple&&this.length>=1}},methods:{__add:function(t){var e=this;if(!this.addDisabled){var i=Array.prototype.slice.call(t.target.files);this.$refs.file.value="",i=i.filter(function(t){return!e.queue.some(function(e){return t.name===e.name})}).map(function(t){if(o(t),t.__size=d(t.size),e.noThumbnails||!t.type.startsWith("image"))e.queue.push(t);else{var i=new FileReader;i.onload=function(i){var o=new Image;o.src=i.target.result,t.__img=o,e.queue.push(t),e.__computeTotalSize()},i.readAsDataURL(t)}return t}),this.files=this.files.concat(i),this.$emit("add",i),this.$emit("total",this.files),this.__computeTotalSize()}},__computeTotalSize:function(){this.totalSize=this.length?this.queue.map(function(t){return t.size}).reduce(function(t,e){return t+e}):0},__remove:function(t){var e=t.name,i=t.__doneUploading;this.uploading&&!i?(this.$emit("remove:abort",t,t.xhr),t.xhr.abort(),this.uploadedSize-=t.__uploaded):this.$emit("remove:"+(i?"done":"cancel"),t,t.xhr),i||(this.queue=this.queue.filter(function(t){return t.name!==e})),t.__removed=!0,this.files=this.files.filter(function(t){return t.name!==e}),this.__computeTotalSize(),this.$emit("total",this.files)},__removeUploaded:function(){this.files=this.files.filter(function(t){return!t.__doneUploading}),this.__computeTotalSize()},__pick:function(){!this.addDisabled&&this.$q.platform.is.mozilla&&this.$refs.file.click()},__getUploadPromise:function(t){var e=this,i=new FormData,a=new XMLHttpRequest;try{i.append("Content-Type",t.type||"application/octet-stream"),i.append(this.name,t),this.additionalFields.forEach(function(t){i.append(t.name,t.value)})}catch(t){return}return o(t),t.xhr=a,new s.a(function(o,r){a.upload.addEventListener("progress",function(i){if(!t.__removed){i.percent=i.total?i.loaded/i.total:0;var o=i.percent*t.size;e.uploadedSize+=o-t.__uploaded,t.__uploaded=o,t.__progress=Math.min(99,parseInt(100*i.percent,10))}},!1),a.onreadystatechange=function(){a.readyState<4||(a.status&&a.status<400?(t.__doneUploading=!0,t.__progress=100,e.$emit("uploaded",t,a),o(t)):(t.__failed=!0,e.$emit("fail",t,a),r(a)))},a.onerror=function(){t.__failed=!0,e.$emit("fail",t,a),r(a)},(e.urlFactory?e.urlFactory(t):s.a.resolve(e.url)).then(function(t){a.open(e.method,t,!0),e.headers&&n()(e.headers).forEach(function(t){a.setRequestHeader(t,e.headers[t])}),e.xhrs.push(a),a.send(i)})})},upload:function(){var t=this,e=this.length;if(0!==e){var i=0;this.uploadedSize=0,this.uploading=!0,this.xhrs=[],this.$emit("start");var o=function(){++i===e&&(t.uploading=!1,t.xhrs=[],t.queue=t.queue.filter(function(t){return!t.__doneUploading}),t.__computeTotalSize(),t.$emit("finish"))};this.queue.map(function(e){return t.__getUploadPromise(e)}).forEach(function(t){t.then(o).catch(o)})}},abort:function(){this.xhrs.forEach(function(t){t.abort()})},reset:function(){this.abort(),this.files=[],this.queue=[],this.__computeTotalSize(),this.$emit("reset")},totalFiles:function(){return this.files.length}}}},504:function(t,e,i){e=t.exports=i(435)(void 0),e.push([t.i,".upload-done[data-v-70c48510]{z-index:2}.uploaded-icon[data-v-70c48510]{z-index:3;text-shadow:0 0 20px #fff}.order[data-v-70c48510],.uploaded-icon[data-v-70c48510]{position:absolute;margin:auto;top:0;right:0;left:0;bottom:0}.order[data-v-70c48510]{z-index:2}",""])},507:function(t,e,i){var o=i(504);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(436)("9891565c",o,!0)},513:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-uploader"},[i("div",{staticClass:"text-center"},[t.uploading?t._e():i("q-icon",{staticClass:"q-uploader-pick-button q-if-control relative-position overflow-hidden ",attrs:{slot:"after",name:"add_a_photo",size:"60px",disabled:t.addDisabled},on:{click:t.__pick},slot:"after"},[i("input",{ref:"file",staticClass:"q-uploader-input absolute-full cursor-pointer",attrs:{type:"file",accept:t.extensions,multiple:t.multiple},on:{change:t.__add}})])],1),t._v(" "),i("q-input-frame",[t.hideUploadButton||t.uploading?t._e():i("q-icon",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"q-if-control",attrs:{slot:"after",name:"cloud_upload",disabled:0===t.length},on:{click:t.upload},slot:"after"})],1),t._v(" "),i("div",{staticClass:"q-uploader-files scroll  "},[i("div",{staticClass:"row"},t._l(t.files,function(e){return i("q-card",{key:e.name,staticClass:"col justify-start no-border",attrs:{flat:""}},[i("q-icon",{staticClass:"cursor-pointer bg-grey-6 relative-position",staticStyle:{"border-radius":"160px",top:"19px","z-index":"3"},attrs:{color:"light",name:"close",size:"2em"},on:{click:function(i){t.__remove(e)}}}),t._v(" "),i("q-card-media",{staticClass:"bg-light",staticStyle:{"border-radius":"13px"}},[i("div",{staticClass:"upload-done"},[e.__doneUploading?i("q-icon",{staticClass:"uploaded-icon",attrs:{name:"cloud_done",size:"500%",color:"green"}}):t._e(),t._v(" "),e.__failed?i("q-icon",{staticClass:"uploaded-icon",attrs:{name:"error",size:"500%",color:"negative"}}):t._e()],1),t._v(" "),e.__img?i("img",{staticClass:"responsive",attrs:{src:e.__img.src}}):t._e()])],1)}))])],1)},staticRenderFns:[]}},518:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(520),a=i.n(o),n=i(5),r=i.n(n),s=i(41),l=i(4),d=i(26),u=(i.n(d),i(2)),c=i(441),p=i.n(c);e.default={components:{QModal:u.c,QModalLayout:u.d,QToolbar:u.s,QToolbarTitle:u.t,QIcon:u.e,QBtn:u.f,Toast:u.R,QInput:u.C,QField:u.B,QSpinnerOval:u.V,QChip:u.T,QTooltip:u.W,Uploader:p.a},data:function(){return{step1:!0,step2:!1,active:!1,title:"اضافه منتج",form:new s.a({description:"",price:null,media:[]}),uploadingUrl:window.apiUrl+"/posts/upload/media/",mediaObj:null,imgSrc:window.apiUrl+"/posts/media/",uploadFieldName:"media[]",uploadedFiles:[],isSaving:!1,prevImg:!1,formInfo:{name:"dfrr",why:"rfri"},path:window.apiUrl+"/posts/create/media",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("jwt-token")},media:["sss"]}},computed:r()({},i.i(l.b)({user:"auth/user"})),mounted:function(){},validations:{form:{description:{required:d.required},price:{required:d.required,numeric:d.numeric},media:{required:d.required}}},methods:{test:function(){this.$refs.upload.processQueue()},open:function(){this.$refs.page.open()},goBack:function(){this.$refs.page.close()},imgChange:function(t){console.log(t)},showSuccess:function(t,e){},removedFile:function(t){},nextStep:function(){this.step1=!1,this.step2=!0},previousStep:function(){this.step1=!0,this.step2=!1},getImage:function(){},displayImg:function(){},removePrevImg:function(t){this.prevImg=!1;var e=this.uploadedFiles.indexOf(t);this.uploadedFiles.splice(e,1)},uploadMeida:function(){var t=this;window.axios.post(window.apiUrl+"/posts/upload/media",{headers:t.headers,media:t.media}).then(function(t){console.log("res",t)}).catch(function(t){t&&console.log(t)})},upload:function(t){return window.axios.post(window.apiUrl+"/posts/upload/media",t).then(function(t){return t.data})},save:function(t){var e=this;this.upload(t).then(function(t){e.uploadedFiles=[].concat(t),e.form.media=e.uploadedFiles,e.isSaving=!1}).catch(function(t){e.uploadError=t.response,e.isSaving=!1})},filesChange:function(t,e){this.isSaving=!0;var i=new FormData;e.length&&(a()(Array(e.length).keys()).map(function(o){i.append(t,e[o],e[o].name)}),this.save(i))},onSubmit:function(t,e){var i=this;if(this.form.media=this.uploadedFiles,i.form.submitting=!0,this.$v.form.$touch(),this.$v.form.$error)return i.form.submitting=!1,e(),!1;console.log(this.form),this.form.post(window.apiUrl+"/posts/create").then(function(t){u.R.create.positive("تم اضافه المنتج"),i.reset()}).catch(function(t){console.log(t),i.form.submitting=!1,e()})},reset:function(){this.$refs.page.close(),this.form.reset(),this.$v.form.$reset()}}}},520:function(t,e,i){t.exports={default:i(521),__esModule:!0}},521:function(t,e,i){i(214),i(523),t.exports=i(10).Array.from},522:function(t,e,i){"use strict";var o=i(17),a=i(43);t.exports=function(t,e,i){e in t?o.f(t,e,a(0,i)):t[e]=i}},523:function(t,e,i){"use strict";var o=i(20),a=i(11),n=i(27),r=i(211),s=i(210),l=i(44),d=i(522),u=i(213);a(a.S+a.F*!i(212)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,a,c,p=n(t),f="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,g=0,_=u(p);if(v&&(h=o(h,m>2?arguments[2]:void 0,2)),void 0==_||f==Array&&s(_))for(e=l(p.length),i=new f(e);e>g;g++)d(i,g,v?h(p[g],g):p[g]);else for(c=_.call(p),i=new f;!(a=c.next()).done;g++)d(i,g,v?r(c,h,[a.value,g],!0):a.value);return i.length=g,i}})},524:function(t,e,i){e=t.exports=i(435)(void 0),e.push([t.i,".prevImg-contanier{position:relative}.desc-input{height:120px;&:active{background:#fff}}#prevImg{min-height:55px;min-width:55px;max-height:90px;max-width:120px;padding:6px}.imgRemBtn{position:absolute;top:0;right:0}.upload{position:relative;height:55px}.input-file,.uploadBtn{width:50px;height:30px}.uploadBtn{position:absolute;text-align:center}.input-file{opacity:0;position:relative;z-index:1}.slide-up-enter-active{transition:all .3s ease}.slide-up-leave-active{transition:all .8s cubic-bezier(1,.5,.8,1)}.slide-up-enter,.slide-up-leave-to{-webkit-transform:translateX(10px);transform:translateX(10px);opacity:0}.iuploader{background:green}.q-input-target{background:gray}",""])},528:function(t,e,i){var o=i(524);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(436)("7ece7c49",o,!0)},533:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-modal",{ref:"page",attrs:{position:"left","content-css":{minWidth:"100%",minHeight:"100%",direction:"rtl"}}},[i("q-modal-layout",{attrs:{"header-style":{"box-shadow":"none"}}},[i("q-toolbar",{staticClass:"text-center no-shadow",attrs:{slot:"header"},slot:"header"},[i("q-btn",{staticClass:"bg-amber-6 uploadBtn",attrs:{icon:"add_a_photo",flat:"",small:"",round:"",color:"white"},on:{click:t.uploadMeida}},[i("input",{staticClass:"input-file",attrs:{type:"file",multiple:"",name:t.uploadFieldName,disabled:t.isSaving,accept:"image/*"},on:{change:function(e){t.filesChange(e.target.name,e.target.files),t.fileCount=e.target.files.length}}})]),t._v(" "),t.$v.form.media.$error?i("div",{staticClass:"text-negative error-item-msg",staticStyle:{position:"absolute",right:"10px",top:"45px","z-index":"40"}},[t.$v.form.media.required?t._e():i("span",[t._v("اضف صوره")])]):t._e(),t._v(" "),i("q-toolbar-title",[t._v(t._s(t.title))]),t._v(" "),i("q-btn",{staticClass:"bg-blue-3",attrs:{color:"faded",flat:"",round:"",small:"",icon:"close"},on:{click:function(e){t.goBack()}}})],1),t._v(" "),i("div",{staticClass:"layout-padding"},[t._v(" \n    "+t._s(t.form.media)+"\n    "),i("uploader",{staticClass:" no-shadow no-border transparent",attrs:{url:t.uploadingUrl,multiple:""}}),t._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"content",staticStyle:{background:"#fff"}},[i("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(e){e.preventDefault(),t.onSubmit(e)},keydown:function(e){t.form.errors.clear(e.target.name)}}},[i("q-field",{attrs:{error:t.$v.form.description.$error}},[i("q-input",{staticClass:"text-right",attrs:{placeholder:"وصف المنتج"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._v(" "),i("div",{staticClass:"q-field-bottom row no-wrap"},[t.$v.form.description.$error?i("div",{staticClass:"q-field-error col text-negative "},[t.$v.form.description.required?t._e():i("span",[t._v("فضلا ادخل اسم المستخدم")])]):t._e()])],1),t._v(" "),i("q-field",{attrs:{error:t.$v.form.price.$error}},[i("q-input",{staticClass:"text-right",attrs:{placeholder:"السعر"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),t._v(" "),i("div",{staticClass:"q-field-bottom row no-wrap"},[t.$v.form.price.$error?i("div",{staticClass:"q-field-error col text-negative "},[t.$v.form.price.required?t._e():i("span",[t._v("كم السعر !!")]),t._v(" "),t.$v.form.price.numeric?t._e():i("span",[t._v("ارقام فقط")])]):t._e()])],1)],1),t._v(" "),i("li",{staticClass:"list-item row no-border"},t._l(t.form.media,function(e){return t.media.length>0?i("div",{staticClass:"prevImg-contanier"},[i("div",{staticClass:"width-1of3"},[i("q-icon",{staticClass:"bg-light round-borders imgRemBtn shadow-4",attrs:{name:"clear",size:"20px",color:"faded"},on:{click:function(i){t.removePrevImg(e)}}}),t._v(" "),i("img",{staticClass:"responsive",attrs:{src:t.imgSrc+e,id:"prevImg"}})],1)]):t._e()}))])])],1),t._v(" "),i("q-toolbar",{attrs:{slot:"footer"},slot:"footer"},[i("q-btn",{staticClass:"full-width bg-faded",on:{click:t.onSubmit}},[t._v("\n      send \n    ")])],1)],1)],1)},staticRenderFns:[]}}});